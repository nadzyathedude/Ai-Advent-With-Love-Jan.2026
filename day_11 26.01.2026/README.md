# üî• –î–µ–Ω—å 11. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ MCP

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MCP SDK/–∫–ª–∏–µ–Ω—Ç (–∏–ª–∏ –ø–æ–¥–Ω–∏–º–∏—Ç–µ MCP-—Å–µ—Ä–≤–µ—Ä, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)

–ù–∞–ø–∏—à–∏—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞—ë—Ç MCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç –Ω–µ–≥–æ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ MCP





–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Perplexity MCP Server –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –±–æ—Ç–∞:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MCP-—Å–µ—Ä–≤–µ—Ä–∞–º —á–µ—Ä–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª JSON-RPC
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

–†–µ–∑—É–ª—å—Ç–∞—Ç: https://monosnap.ai/file/JsiuKfykFcUYiraWdmnuxWUU8CFgOF

Telegram-–±–æ—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Model Context Protocol, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ MCP-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (Perplexity AI –ø–æ–∏—Å–∫, –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è).

## –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–î–µ–Ω—å 11)

- **MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Perplexity MCP Server
- **–ö–æ–º–∞–Ω–¥–∞ `/mcp_tools`**: –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö MCP-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 30 —Å–µ–∫—É–Ω–¥
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: graceful fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞

### Perplexity MCP Server

MCP-—Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç 4 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| `perplexity_search` | –ü–æ–∏—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ —á–µ—Ä–µ–∑ Perplexity Search API |
| `perplexity_chat` | –†–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π –ò–ò —Å –≤–µ–±-–ø–æ–∏—Å–∫–æ–º (sonar-pro) |
| `perplexity_research` | –ì–ª—É–±–æ–∫–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å —Ü–∏—Ç–∞—Ç–∞–º–∏ (sonar-deep-research) |
| `perplexity_reason` | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è (sonar-reasoning-pro) |

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–î–µ–Ω—å 10)

- **–í—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è**: SQLite (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ JSON
- **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è**: —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ, –Ω–æ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –±–∞–∑–µ
- **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ —Å–∂–∞—Ç–∏–µ**: –∫–æ–≥–¥–∞ —Å–∞–º–º–∞—Ä–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è, —Å–æ–∑–¥–∞—é—Ç—Å—è –º–µ—Ç–∞-—Å–∞–º–º–∞—Ä–∏
- **–ü–æ–∏—Å–∫ –≤ –ø–∞–º—è—Ç–∏**: –±–æ—Ç –∏—â–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- **Token budget**: —Å–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å —É—á—ë—Ç–æ–º –ª–∏–º–∏—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤
- `/summary_on` ‚Äî –≤–∫–ª—é—á–∏—Ç—å –≤–Ω–µ—à–Ω—é—é –ø–∞–º—è—Ç—å (–±–µ–∑ –ø–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–î–µ–Ω—å 9)

- `/summary` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–µ–π –ø–∞–º—è—Ç–∏ –∏ —Å–∂–∞—Ç–∏—è –¥–∏–∞–ª–æ–≥–∞
- `/summary_status` ‚Äî —Å—Ç–∞—Ç—É—Å –≤–Ω–µ—à–Ω–µ–π –ø–∞–º—è—Ç–∏
- `/summary_off` ‚Äî –æ—Ç–∫–ª—é—á–∏—Ç—å –≤–Ω–µ—à–Ω—é—é –ø–∞–º—è—Ç—å
- `/summary_now` ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–∂–∞—Ç—å –¥–∏–∞–ª–æ–≥
- `/clear_history` ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ –ø–æ—Å–ª–µ N —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–î–µ–Ω—å 8)

- `/tokens` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–º –æ —Ç–æ–∫–µ–Ω–∞—Ö (on/off)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ USD –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∞—Ä–∏—Ñ–æ–≤ –º–æ–¥–µ–ª–µ–π

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–î–µ–Ω—å 7)

- `/set_model` ‚Äî –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –ò–ò –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
- `/current_model` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–π –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥–µ–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏

| –ú–æ–¥–µ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ | –í—Ö–æ–¥ ($/1M) | –í—ã—Ö–æ–¥ ($/1M) |
|--------|----------|-------------|--------------|
| `gpt-4o` | –°–∞–º–∞—è –º–æ—â–Ω–∞—è –º–æ–¥–µ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) | $2.50 | $10.00 |
| `gpt-4.1` | –ü–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è GPT-4 | $2.00 | $8.00 |
| `gpt-4.1-mini` | –ë—ã—Å—Ç—Ä–∞—è –∏ —ç–∫–æ–Ω–æ–º–∏—á–Ω–∞—è –≤–µ—Ä—Å–∏—è | $0.40 | $1.60 |
| `gpt-3.5-turbo` | –ë—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á | $0.50 | $1.50 |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
day_11 26.01.2026/
‚îú‚îÄ‚îÄ bot.py                # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ mcp_client.py         # MCP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Perplexity
‚îú‚îÄ‚îÄ models.py             # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏ (–≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ü–µ–Ω—ã)
‚îú‚îÄ‚îÄ storage.py            # –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (SQLite)
‚îú‚îÄ‚îÄ token_usage.py        # –ü–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤ –∏ —Ä–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ conversation_store.py # –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤ (legacy)
‚îú‚îÄ‚îÄ external_memory.py    # –í–Ω–µ—à–Ω—è—è –ø–∞–º—è—Ç—å (SQLite + JSON)
‚îú‚îÄ‚îÄ memory_retrieval.py   # –ü–æ–∏—Å–∫ –∏ —Å–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
‚îú‚îÄ‚îÄ summary_manager.py    # –õ–æ–≥–∏–∫–∞ —Å–∂–∞—Ç–∏—è –¥–∏–∞–ª–æ–≥–∞
‚îú‚îÄ‚îÄ config.py             # API-—Ç–æ–∫–µ–Ω—ã (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ TOKEN_COUNTING.md     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —É—á—ë—Ç—É —Ç–æ–∫–µ–Ω–æ–≤
‚îú‚îÄ‚îÄ DIALOG_SUMMARY.md     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∂–∞—Ç–∏—é –¥–∏–∞–ª–æ–≥–∞
‚îú‚îÄ‚îÄ EXTERNAL_MEMORY.md    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –≤–Ω–µ—à–Ω–µ–π –ø–∞–º—è—Ç–∏
‚îî‚îÄ‚îÄ README.md             # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –ó–∞–ø—É—Å–∫

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Python 3.12)
python3.12 -m venv venv
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Python
pip install -r requirements.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js (–¥–ª—è MCP Server)
# macOS:
brew install node
# Ubuntu:
sudo apt install nodejs npm

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
cp config.example.py config.py
# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ config.py:
# - api_token_telegram: —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
# - api_token_openai: –∫–ª—é—á OpenAI API
# - api_token_perplexity: –∫–ª—é—á Perplexity API (https://perplexity.ai/settings/api)

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python bot.py
```

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º |
| `/set_model` | –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –ò–ò |
| `/current_model` | –¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å |
| `/tokens` | –°—Ç–∞—Ç—É—Å –æ—Ç—á—ë—Ç–∞ –æ —Ç–æ–∫–µ–Ω–∞—Ö |
| `/tokens on` | –í–∫–ª—é—á–∏—Ç—å –æ—Ç—á—ë—Ç –æ —Ç–æ–∫–µ–Ω–∞—Ö |
| `/tokens off` | –í—ã–∫–ª—é—á–∏—Ç—å –æ—Ç—á—ë—Ç –æ —Ç–æ–∫–µ–Ω–∞—Ö |
| `/summary` | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–Ω–µ—à–Ω—é—é –ø–∞–º—è—Ç—å |
| `/summary_status` | –°—Ç–∞—Ç—É—Å –≤–Ω–µ—à–Ω–µ–π –ø–∞–º—è—Ç–∏ |
| `/summary_on` | –í–∫–ª—é—á–∏—Ç—å –≤–Ω–µ—à–Ω—é—é –ø–∞–º—è—Ç—å |
| `/summary_off` | –û—Ç–∫–ª—é—á–∏—Ç—å –≤–Ω–µ—à–Ω—é—é –ø–∞–º—è—Ç—å |
| `/summary_now` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–∂–∞—Ç—å –¥–∏–∞–ª–æ–≥ |
| `/clear_history` | –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞ |
| `/mcp_tools` | –ü–æ–∫–∞–∑–∞—Ç—å MCP-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Perplexity |
| `/show_commands` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ |

## –í–Ω–µ—à–Ω—è—è –ø–∞–º—è—Ç—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/summary`
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è:
   - **SQLite** ‚Äî –±—ã—Å—Ç—Ä–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - **JSON** ‚Äî –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
3. –£–∫–∞–∂–∏—Ç–µ –ø–æ—Ä–æ–≥ —Å–∂–∞—Ç–∏—è (1-500 —Å–æ–æ–±—â–µ–Ω–∏–π)
4. –ì–æ—Ç–æ–≤–æ! –í–Ω–µ—à–Ω—è—è –ø–∞–º—è—Ç—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
–°–æ–æ–±—â–µ–Ω–∏—è ‚Üí [–•—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î] ‚Üí –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ø–æ—Ä–æ–≥ N
                                    ‚Üì
                            –°–æ–∑–¥–∞—ë—Ç—Å—è —Å–∞–º–º–∞—Ä–∏
                                    ‚Üì
                        –°–æ–æ–±—â–µ–Ω–∏—è –∞—Ä—Ö–∏–≤–∏—Ä—É—é—Ç—Å—è
                        (–ù–ï —É–¥–∞–ª—è—é—Ç—Å—è!)
                                    ‚Üì
                    –ù–∞–∫–æ–ø–∏–ª–æ—Å—å –º–Ω–æ–≥–æ —Å–∞–º–º–∞—Ä–∏?
                                    ‚Üì
                        –ú–µ—Ç–∞-—Å–∞–º–º–∞—Ä–∏ (—É—Ä–æ–≤–µ–Ω—å 2)
                                    ‚Üì
                    –ù–∞–∫–æ–ø–∏–ª–æ—Å—å –º–Ω–æ–≥–æ L2?
                                    ‚Üì
                        –ú–µ—Ç–∞-–º–µ—Ç–∞-—Å–∞–º–º–∞—Ä–∏ (L3)
                                    ...
```

### –°–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –±–æ—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç:

1. **–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–∞–º–º–∞—Ä–∏** (–≤—ã—Å—à–∏–π —É—Ä–æ–≤–µ–Ω—å ‚Üí –Ω–∏–∑—à–∏–π)
2. **–ü–æ—Å–ª–µ–¥–Ω–∏–µ 4 –ø–∞—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π** (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–≤—è–∑–Ω–æ—Å—Ç–∏)
3. **–†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã** (–ø–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –≤ –∞—Ä—Ö–∏–≤–µ)

–í—Å—ë —ç—Ç–æ —É–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –≤ token budget (~8000 —Ç–æ–∫–µ–Ω–æ–≤).

### –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å–∞–º–º–∞—Ä–∏

- –¶–µ–ª–∏ –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –í–∞–∂–Ω—ã–µ —Ñ–∞–∫—Ç—ã (–∏–º–µ–Ω–∞, –¥–∞—Ç—ã, —á–∏—Å–ª–∞)
- –ù–µ—Ä–µ—à—ë–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [EXTERNAL_MEMORY.md](EXTERNAL_MEMORY.md)

## –ü—Ä–∏–º–µ—Ä —Å—Ç–∞—Ç—É—Å–∞

```
**–°—Ç–∞—Ç—É—Å –≤–Ω–µ—à–Ω–µ–π –ø–∞–º—è—Ç–∏:** –≤–∫–ª—é—á–µ–Ω–∞

–•—Ä–∞–Ω–∏–ª–∏—â–µ: **SQLITE**
–ü–æ—Ä–æ–≥ —Å–∂–∞—Ç–∏—è: **10** —Å–æ–æ–±—â–µ–Ω–∏–π
–°–æ–æ–±—â–µ–Ω–∏–π —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–∂–∞—Ç–∏—è: **5**
–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–∂–∞—Ç–∏—è: **5** —Å–æ–æ–±—â–µ–Ω–∏–π

–í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π: **150**
–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–æ: **140**
–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–≤–æ–¥–æ–∫: **3**
–ú–∞–∫—Å. —É—Ä–æ–≤–µ–Ω—å —Å–∂–∞—Ç–∏—è: **2**
```

## –ü—Ä–∏–º–µ—Ä –æ—Ç—á—ë—Ç–∞ –æ —Ç–æ–∫–µ–Ω–∞—Ö

```
**Token Usage** (GPT-4o, API):
  Input: 150 tokens
  Output: 200 tokens
  Total: 350 tokens

**Cost (USD):**
  Input: $0.000375
  Output: $0.002000
  Total: $0.002375
```

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ /mcp_tools

```
Connecting to Perplexity MCP Server...

**Perplexity MCP Server Tools:**

1. `perplexity_search`
   Search the web using Perplexity's Sonar API

2. `perplexity_chat`
   Chat with Perplexity's Sonar model with web search

3. `perplexity_research`
   Deep research using Perplexity's research model

4. `perplexity_reason`
   Advanced reasoning using Perplexity's reasoning model
```

## MCP (Model Context Protocol)

### –ß—Ç–æ —Ç–∞–∫–æ–µ MCP?

Model Context Protocol ‚Äî –æ—Ç–∫—Ä—ã—Ç—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤ –∫ –≤–Ω–µ—à–Ω–∏–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º. –ü—Ä–æ—Ç–æ–∫–æ–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JSON-RPC 2.0 —á–µ—Ä–µ–∑ stdio.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Telegram Bot ‚îÄ‚îÄ‚ñ∫ MCP Client (Python) ‚îÄ‚îÄ‚ñ∫ stdio ‚îÄ‚îÄ‚ñ∫ Perplexity MCP Server (Node.js)
                                                            ‚îÇ
                                                            ‚ñº
                                                   Perplexity API
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **Python**: `mcp>=1.0.0` ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π SDK
- **Node.js**: `@perplexity-ai/mcp-server` ‚Äî MCP-—Å–µ—Ä–≤–µ—Ä Perplexity (–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ npx)

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [EXTERNAL_MEMORY.md](EXTERNAL_MEMORY.md) ‚Äî –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –≤–Ω–µ—à–Ω–µ–π –ø–∞–º—è—Ç–∏
- [TOKEN_COUNTING.md](TOKEN_COUNTING.md) ‚Äî —É—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤
- [DIALOG_SUMMARY.md](DIALOG_SUMMARY.md) ‚Äî —Å–∂–∞—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞ (legacy)
